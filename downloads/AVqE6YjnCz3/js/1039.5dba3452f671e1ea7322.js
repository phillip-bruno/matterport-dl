"use strict";(self.webpackChunkmp_webgl=self.webpackChunkmp_webgl||[]).push([[1039],{48089:t=>{const s=t=>"object"==typeof t&&null!==t,e=Symbol("skip"),n=t=>s(t)&&!(t instanceof RegExp)&&!(t instanceof Error)&&!(t instanceof Date),i=(t,s,a,o=new WeakMap)=>{if(a={deep:!1,target:{},...a},o.has(t))return o.get(t);o.set(t,a.target);const{target:r}=a;delete a.target;const c=t=>t.map((t=>n(t)?i(t,s,a,o):t));if(Array.isArray(t))return c(t);for(const[h,u]of Object.entries(t)){const p=s(h,u,t);if(p===e)continue;let[l,d,{shouldRecurse:f=!0}={}]=p;"__proto__"!==l&&(a.deep&&f&&n(d)&&(d=Array.isArray(d)?c(d):i(d,s,a,o)),r[l]=d)}return r};t.exports=(t,e,n)=>{if(!s(t))throw new TypeError(`Expected an object, got \`${t}\` (${typeof t})`);return i(t,e,n)},t.exports.mapObjectSkip=e},99173:(t,s,e)=>{e.r(s),e.d(s,{snakeCase:()=>u});var n=function(){return n=Object.assign||function(t){for(var s,e=1,n=arguments.length;e<n;e++)for(var i in s=arguments[e])Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=s[i]);return t},n.apply(this,arguments)};Object.create;Object.create;var i=function(){return i=Object.assign||function(t){for(var s,e=1,n=arguments.length;e<n;e++)for(var i in s=arguments[e])Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=s[i]);return t},i.apply(this,arguments)};Object.create;Object.create;function a(t){return t.toLowerCase()}var o=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],r=/[^A-Z0-9]+/gi;function c(t,s,e){return s instanceof RegExp?t.replace(s,e):s.reduce((function(t,s){return t.replace(s,e)}),t)}function h(t,s){return void 0===s&&(s={}),function(t,s){void 0===s&&(s={});for(var e=s.splitRegexp,n=void 0===e?o:e,i=s.stripRegexp,h=void 0===i?r:i,u=s.transform,p=void 0===u?a:u,l=s.delimiter,d=void 0===l?" ":l,f=c(c(t,n,"$1\0$2"),h,"\0"),g=0,m=f.length;"\0"===f.charAt(g);)g++;for(;"\0"===f.charAt(m-1);)m--;return f.slice(g,m).split("\0").map(p).join(d)}(t,i({delimiter:"."},s))}function u(t,s){return void 0===s&&(s={}),h(t,n({delimiter:"_"},s))}},99694:(t,s,e)=>{const n=e(48089),{snakeCase:i}=e(99173),a={}.constructor;function o(t,s,e){return e.shouldRecurse?{shouldRecurse:e.shouldRecurse(t,s)}:void 0}t.exports=function(t,s){if(Array.isArray(t)){if(t.some((t=>t.constructor!==a)))throw new Error("obj must be array of plain objects")}else if(t.constructor!==a)throw new Error("obj must be an plain object");return s=Object.assign({deep:!0,exclude:[],parsingOptions:{}},s),n(t,(function(t,e){return[(n=s.exclude,a=t,n.some((function(t){return"string"==typeof t?t===a:t.test(a)}))?t:i(t,s.parsingOptions)),e,o(t,e,s)];var n,a}),s)}},99622:(t,s,e)=>{e.d(s,{q:()=>r});var n=e(10843),i=e(99694),a=e.n(i),o=e(67536);class r{constructor(){this.event="mp_feature_usage",this.name="feature-usage-handler",this.handlers=[{msgType:o.P,func:(t,s)=>{const e=n.Ay.for(this),i=a()(s.data);e.debug(`tracking ${this.event} [${i.event_name}] event`,{payload:i}),t.track(this.event,i)}}]}}},67536:(t,s,e)=>{e.d(s,{P:()=>i});var n=e(89103);class i extends n.QB{constructor(t){super(),this.data=t}}},18633:(t,s,e)=>{e.d(s,{OR:()=>o,Zl:()=>r,v0:()=>a,v3:()=>i,vp:()=>c});var n=e(92475);class i extends n.E{constructor(t,s,e,n){super(),this.position=t,this.clientPosition=s,this.delta=e,this.buttons=n}}class a extends n.E{constructor(t,s,e,n,i){super(),this.position=t,this.clientPosition=s,this.delta=e,this.buttons=n,this.progress=i}}class o extends n.E{constructor(t,s,e){super(),this.position=t,this.clientPosition=s,this.buttons=e}}class r extends n.E{constructor(t,s,e){super(),this.position=t,this.clientPosition=s,this.buttons=e}}class c extends n.E{constructor(t,s,e){super(),this.position=t,this.clientPosition=s,this.cancelled=e}}},46957:(t,s,e)=>{e.d(s,{b:()=>o,d:()=>a});var n=e(31002),i=e(72268);const a=t=>t instanceof n.rX?t.button===i.m.PRIMARY:t.buttons===i.O.PRIMARY,o=(t,s)=>{var e;const n=(null===(e=s.parentElement)||void 0===e?void 0:e.clientWidth)||0,i=s.offsetLeft,a=s.offsetWidth,o=Math.max(60,Math.min(90,.08*a));return 0===i&&t>0&&t<o||!(i+a<n)&&t>n-o}},41837:(t,s,e)=>{e.d(s,{QZ:()=>a,To:()=>h,bV:()=>u,hR:()=>i,kC:()=>r,sN:()=>o,wx:()=>c,z:()=>p});var n=e(89103);class i extends n.QB{constructor(t){super(),this.data=t}}class a extends n.QB{constructor(t){super(),this.data=t}}class o extends n.QB{}class r extends n.QB{constructor(t,s){super(),this.sid=t,this.text=s}}class c extends n.QB{constructor(t,s,e){super(),this.sid=t,this.oldText=s,this.newText=e}}class h extends n.QB{constructor(t){super(),this.data=t}}class u extends n.QB{constructor(t){super(),this.data=t}}class p extends n.QB{constructor(t,s,e){super(),this.opened=t,this.viewmode=s,this.count=e}}n.QB},95522:(t,s,e)=>{e.d(s,{N:()=>i});var n=e(89103);class i extends n.QB{constructor(t){super(),this.rating=t}}},23431:(t,s,e)=>{var n;e.d(s,{I:()=>n}),function(t){t[t.RoomLabels=0]="RoomLabels",t[t.Normal=1]="Normal"}(n||(n={}))},2812:(t,s,e)=>{e.d(s,{O:()=>r});var n=e(84710),i=e(45205),a=e(2803),o=e(97696);class r extends n.B{constructor(t){super(),this.name="snapshots",this.snapshots={};for(const s in t)this.snapshots[s]=t[s].clone()}get(t){return this.snapshots[t]}async getImageUrl(t){const s=this.get(t),e=new URL(await s.imageUrl.get());return"panorama"===s.category&&(e.searchParams.delete("height"),e.searchParams.delete("fit")),e.toString()}get collection(){return this.snapshots}get snapshotsCount(){return this.snapshots?Object.keys(this.snapshots).length:0}getSortedCollection(t){if(!this.snapshotsCount)return[];let s=Object.values(this.snapshots);return(null==t?void 0:t.filterFn)&&(s=s.filter(t.filterFn)),s.sort((null==t?void 0:t.compareFn)||o.PN)}setSelectedPhoto(t){this.selectedPhotoId=t,this.commit()}add(t){t.sid=this.validateSid(t.sid),this.snapshots[t.sid]=t,this.updateOnStaleCallbacks(),this.commit()}remove(t){delete this.snapshots[t]}validateSid(t){for(;!t||this.snapshots[t];)t=(0,i.D)(11);return t}set onStale(t){this.hydrate=t,this.updateOnStaleCallbacks()}updateOnStaleCallbacks(){this.hydrate&&(0,a._)(this.snapshots,(async()=>{const t=await this.hydrate();for(const s in this.snapshots)t&&t[s]&&this.snapshots[s].refresh(t[s])}))}}},85846:(t,s,e)=>{e.d(s,{xO:()=>c});var n,i=e(48539),a=e(50380);!function(t){t.GET="GET",t.POST="POST",t.PATCH="PATCH",t.PUT="PUT",t.DELETE="DELETE",t.OPTIONS="OPTIONS"}(n||(n={}));class o{constructor(){this._options={responseType:"json"}}get options(){const t=this._options;return t.headers=(0,a.v)(this.url,this._options.headers||{}),t}}class r extends o{constructor(t){super(),this.config=t,this.url=t.path}async read(){const{deserialize:t}=this.config;let s=null;return this.config.cachedData&&this.config.cachedData.data?s=this.config.cachedData.data:(s=await this.config.queue.get(this.config.path,this.options),this.config.cachedData&&(this.config.cachedData.data=s)),t(s)}clearCache(){this.config.cachedData&&(this.config.cachedData.data=null)}}class c extends r{constructor(t){super(t),this.config=t,this.acceptsPartial=!1,this.config.batchUpdate="batchUpdate"in this.config&&this.config.batchUpdate}async create(t){throw Error("Not implemented")}updateBatch(t,s){const{serialize:e}=this.config,i=[],a=[...new Set([...Object.keys(t),...Object.keys(s)])];for(const e of a){t[e]||s[e]||i.push(this.config.queue.delete(`${this.config.path}/${e}`,this.options))}const o=e(t,s),r=Object.assign(Object.assign({},this.options),{body:o});return i.push(this.config.queue.request(this.config.httpMethod||n.POST,this.config.path,r)),Promise.all(i)}updateInternal(t,s){const{serialize:e}=this.config,a=[],o=Object.assign({},this.options),r=Object.keys(t),c=Object.keys(s),h=(0,i.ij)(r.concat(c));for(const i in h){const r=h[i],c=t[r]||s[r];if(c){const t={};t[r]=c;const i={},h=s[r];h&&(i[r]=h);const u=e(t,i);o.body=u,a.push(this.config.queue.request(this.config.httpMethod||n.POST,this.config.path,o))}else a.push(this.config.queue.delete(`${this.config.path}/${r}`,this.options))}return Promise.all(a)}async update(t,s){this.clearCache(),await(this.config.batchUpdate?this.updateBatch(t,s||{}):this.updateInternal(t,s||{}))}async delete(t){throw Error("Not implemented")}}},16964:(t,s,e)=>{e.d(s,{l:()=>i});var n=e(68909);class i extends n.Mesh{constructor(t=100,s,e,n=1){super(s,e),this.capacity=t,this.numInstances=n,this.topIdx=0,this.indexMap=new Map,this.viewMap=new Map,this.frustumCulled=!1,this.matrixAutoUpdate=!1}allocInstance(t){const s=this.topIdx;return this.topIdx++,this.topIdx>=this.capacity&&this.doubleBufferCapacities(),this.indexMap.set(t,s),this.viewMap.set(s,t),this.geometry.instanceCount=this.topIdx*this.numInstances,s}removeInstance(t){const s=this.indexMap.get(t);if(null!=s){const e=this.topIdx-1;this.moveInstanceData(e,s),this.indexMap.delete(t),this.viewMap.delete(s);const n=this.viewMap.get(e);null!=n&&(this.indexMap.set(n,s),this.viewMap.set(s,n)),this.topIdx--,this.geometry.instanceCount=this.topIdx*this.numInstances}}removeAllInstances(){this.topIdx=0,this.geometry.instanceCount=0,this.indexMap.clear(),this.viewMap.clear()}moveInstanceData(t,s){if(t!==s)for(const e of this.allAttributeNames){const i=this[e];if(i instanceof n.InstancedBufferAttribute){const e=i.itemSize;for(let n=0;n<this.numInstances;n++)for(let a=0;a<e;a++)i.array[e*(this.numInstances*s+n)+a]=i.array[e*(this.numInstances*t+n)+a];i.needsUpdate=!0}}}get allAttributeNames(){const t=[];for(const s in this)this[s]instanceof n.InstancedBufferAttribute&&t.push(s);return t}*getIndices(t){const s=this.indexMap.get(t);if(null!=s)for(let t=0;t<this.numInstances;t++)yield this.numInstances*s+t}get capacityForAllInstances(){return this.capacity*this.numInstances}doubleBufferCapacities(){this.capacity=2*this.capacity;const t=[];for(const s of this.allAttributeNames){const e=this[s];e instanceof n.InstancedBufferAttribute&&t.push([s,this.expandCapacityForAttr(e)])}this.geometry.dispose();for(const[s,e]of t)this[s]=e,this.geometry.setAttribute(s,e)}expandCapacityForAttr(t){const s=t.array instanceof Uint8Array,e=!!s,i=new(s?Uint8Array:Float32Array)(this.capacity*t.itemSize*this.numInstances);return i.set(t.array),new n.InstancedBufferAttribute(i,t.itemSize,e)}}},78498:(t,s,e)=>{function n(t){return{x:t.x,y:t.y,z:t.z}}function i(t){return{x:t.x||t._x,y:t.y||t._y,z:t.z||t._z,w:t.w||t._w}}e.d(s,{I:()=>n,p:()=>i})}}]);